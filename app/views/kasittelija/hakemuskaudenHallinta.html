<div class="container">
  <div ng-hide="sallittu('view-hakemuskausi')">
    <p>Ei hakemuskauden katseluoikeutta.</p>
  </div>
  <div ng-show="sallittu('view-hakemuskausi')" ng-repeat="hakemuskausi in hakemuskaudet">
    <div ng-class="{uusihakemuskausi:hakemuskausi.uusi,well:!hakemuskausi.uusi}">
      <div class="row">
        <div class="col-md-3 text-center">
          <p class="hakemuskausi-vuosi">{{hakemuskausi.vuosi}}</p>

          <p ng-show="hakemuskausi.tilatunnus=='A' || !hakemuskausi.uusi">
            <a href="api/hakemuskausi/{{hakemuskausi.vuosi}}/hakuohje" target="_blank">Hakuohje
              {{hakemuskausi.vuosi}}</a>
          </p>

          <p ng-show="hakemuskausi.uusi">
            <label class="hakemuskausi-file-upload">
              <input type="file" class="hidden-file-input" ng-show=" sallittu('modify-hakemuskausi')" ng-file-select
                     ng-file-change="upload($files, hakemuskausi.vuosi)"
                     multiple="false" ng-accept="'application/pdf'"/>
              Lataa hakuohje
            </label>
          </p>

          <p ng-show="hakemuskausi.tilatunnus=='A' && sallittu('modify-hakemuskausi')">
            <button data-ng-click="luoUusiHakemuskausi(hakemuskausi.vuosi)" class="btn btn-success btn-lg">Käynnistä
              hakemuskausi
            </button>
          </p>
          <div class="row hakemuskausi-panel-hakuaikatoiminnot">
            <p><a href="" ng-show="sallittu('modify-hakemuskausi')"><span class="glyphicon glyphicon-envelope"></span>
              Lähetä viesti hakijoille</a></p>

            <p><a href="" ng-show="sallittu('modify-hakemuskausi')&&(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)"
                  ng-click="asetaMuokkaaHakuaikojaVuosi(hakemuskausi.vuosi, hakemuskausi.avustushakemusAlkupvm, hakemuskausi.avustushakemusLoppupvm, hakemuskausi.maksatushakemus1Alkupvm, hakemuskausi.maksatushakemus1Loppupvm, hakemuskausi.maksatushakemus2Alkupvm, hakemuskausi.maksatushakemus2Loppupvm)"><span
              class="glyphicon glyphicon-pencil"></span>
              Muokkaa hakuaikoja</a></p>

            <p><a href="" ng-show="sallittu('modify-hakemuskausi')&&(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                  ng-click="tallennaHakuajat(hakemuskausi.vuosi)"><span class="glyphicon glyphicon-pencil"></span>
              Tallenna hakuajat</a></p>
          </div>
        </div>
        <div class="col-md-3 text-center">
          <div class="panel panel-primary hakemuskausi-panel">
            <div class="panel-heading">
              <p class="panel-title">Avustushakemus</p>
            </div>
            <div class="panel-body">
              <div ng-show="!hakemuskausi.avustushakemusKaynnissa"
                   class="hakemuskausi-panel-ei-kaynnissa">Ei Käynnissä
              </div>
              <div ng-show="hakemuskausi.avustushakemusKaynnissa">
                <p>

                <div class="col-md-3 text-center">24/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Keskeneräinen</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center"> 0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Vireillä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Täydennettävänä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Täydennetty</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-success">Tarkastettu</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-primary">Päätetty</span></div>
                </p>
              </div>
              <div class="row hakemuskausi-panel-hakuaika">

                <p>Hakuaika:</p>

                <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                   class="input-group hakuaika-input juku-datepicker">
                  <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                         ng-model="$parent.avustushakemusAlkupvm" datepicker-options="{{dateOptions}}"
                         is-open="avustushakemusAlkupvmKalenteri" ng-required="true" show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="avustushakemusAlkupvmKalenteri = !avustushakemusAlkupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
                </p>
                <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.avustushakemusAlkupvm |
                  date:'dd.MM.yyyy'}}</p>

                <div class="hakemuskausi-panel-hakuaika-viiva"></div>
                <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                   class="input-group hakuaika-input juku-datepicker">
                  <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                         ng-model="$parent.avustushakemusLoppupvm" datepicker-options="{{dateOptions}}"
                         is-open="avustushakemusLoppupvmKalenteri" ng-required="true" show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="avustushakemusLoppupvmKalenteri = !avustushakemusLoppupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
                </p>
                <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.avustushakemusLoppupvm |
                  date:'dd.MM.yyyy'}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 text-center">
          <div class="panel panel-info hakemuskausi-panel">
            <div class="panel-heading">
              <p class="panel-title">1. maksatushakemus</p>
            </div>
            <div class="panel-body">
              <div ng-show="!hakemuskausi.maksatushakemus1Kaynnissa"
                   class="col-md-12 text-center hakemuskausi-panel-ei-kaynnissa">Ei Käynnissä
              </div>
              <div ng-show="hakemuskausi.maksatushakemus1Kaynnissa">
                <p>

                <div class="col-md-3 text-center">24/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Keskeneräinen</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center"> 0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Vireillä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Täydennettävänä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Täydennetty</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-success">Tarkastettu</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-primary">Päätetty</span></div>
                </p>
              </div>
              <div class="row hakemuskausi-panel-hakuaika">

                <p>Hakuaika:</p>

                <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                   class="input-group hakuaika-input juku-datepicker">
                  <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                         ng-model="$parent.maksatushakemus1Alkupvm" datepicker-options="{{dateOptions}}"
                         is-open="maksatushakemus1AlkupvmKalenteri" ng-required="true"
                         show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="maksatushakemus1AlkupvmKalenteri = !maksatushakemus1AlkupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
                </p>
                <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.maksatushakemus1Alkupvm |
                  date:'dd.MM.yyyy'}}</p>

                <div class="hakemuskausi-panel-hakuaika-viiva"></div>
                <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                   class="input-group hakuaika-input juku-datepicker">
                  <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                         ng-model="$parent.maksatushakemus1Loppupvm" datepicker-options="{{dateOptions}}"
                         is-open="maksatushakemus1LoppupvmKalenteri" ng-required="true"
                         show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="maksatushakemus1LoppupvmKalenteri = !maksatushakemus1LoppupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
                </p>
                <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.maksatushakemus1Loppupvm |
                  date:'dd.MM.yyyy'}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 text-center">
          <div class="panel panel-info hakemuskausi-panel">
            <div class="panel-heading">
              <p class="panel-title">2. maksatushakemus</p>
            </div>
            <div class="panel-body">
              <div ng-show="!hakemuskausi.maksatushakemus2Kaynnissa"
                   class="col-md-12 text-center hakemuskausi-panel-ei-kaynnissa">Ei Käynnissä
              </div>
              <div ng-show="hakemuskausi.maksatushakemus2Kaynnissa">
                <p>

                <div class="col-md-3 text-center">24/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Keskeneräinen</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center"> 0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Vireillä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-default">Täydennettävänä</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-danger">Täydennetty</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-success">Tarkastettu</span></div>
                </p>
                <p>

                <div class="col-md-3 text-center">0/24</div>
                <div class="col-md-9 text-left"><span class="label label-primary">Päätetty</span></div>
                </p>
              </div>
            </div>
            <div class="row hakemuskausi-panel-hakuaika">
              <p>Hakuaika:</p>

              <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                 class="input-group hakuaika-input juku-datepicker">
                <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                       ng-model="$parent.maksatushakemus2Alkupvm" datepicker-options="{{dateOptions}}"
                       is-open="maksatushakemus2AlkupvmKalenteri" ng-required="true"
                       show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="maksatushakemus2AlkupvmKalenteri = !maksatushakemus2AlkupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
              </p>
              <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.maksatushakemus2Alkupvm |
                date:'dd.MM.yyyy'}}</p>

              <div class="hakemuskausi-panel-hakuaika-viiva"></div>
              <p ng-show="(muokkaaHakuaikojaVuosi==hakemuskausi.vuosi)"
                 class="input-group hakuaika-input juku-datepicker">
                <input type="text" class="form-control" datepicker-popup="dd.MM.yyyy"
                       ng-model="$parent.maksatushakemus2Loppupvm" datepicker-options="{{dateOptions}}"
                       is-open="maksatushakemus2LoppupvmKalenteri" ng-required="true"
                       show-button-bar="false"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default"
                        ng-click="maksatushakemus2LoppupvmKalenteri = !maksatushakemus2LoppupvmKalenteri;avaaKalenteri($event)">
                  <i
                    class="glyphicon glyphicon-calendar"></i></button>
              </span>
              </p>
              <p ng-show="(muokkaaHakuaikojaVuosi!=hakemuskausi.vuosi)">{{hakemuskausi.maksatushakemus2Loppupvm |
                date:'dd.MM.yyyy'}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--{{hakemuskaudet | json}}-->
</div>
